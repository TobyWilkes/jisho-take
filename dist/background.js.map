{"version":3,"sources":["webpack:///webpack/bootstrap 4fdd6b7d36ff5ca0f938","webpack:///./src/Definition.ts","webpack:///./src/WordList.ts","webpack:///./src/background.ts"],"names":[],"mappings":"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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4fdd6b7d36ff5ca0f938","export class Definition {\n\tleft:String[] = [];\n\tright:String[] = [];\n\n\tconstructor(_left:String[] = [], _right:String[] = []){\n\t\tthis.left = _left;\n\t\tthis.right = _right;\n\t}\n\n\ttoString = function(){\n\t\treturn `${this.left.toString()} | ${this.right.toString()}`;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Definition.ts","import * as $ from 'jquery';\nimport { Definition } from \"./Definition\";\n\nexport class WordList {\n\twords:Definition[] = [];\n\n\tconstructor() {\n\t\tthis.load();\n\t}\n\n\taddWord(newWord:Definition) {\n\t\tthis.words.push(newWord);\n\t\tconsole.log(`${this.words.length} words`);\n\t\tthis.save();\n\t}\n\n\tload(callback = ()=>{}) {\n\t\tbrowser.storage.local.get((items) => {\n\t\t\tthis.words = <Definition[]>items.words.map((e) => {\n\t\t\t\treturn new Definition(e.l, e.r);\n\t\t\t});\n\t\t\tcallback();\n\t\t\tconsole.log(\"Loaded\", items);\n\t\t});\n\t}\n\n\tsave() {\n\t\tbrowser.storage.local.set({\n\t\t    words: this.words.map((e) => {\n\t\t    \treturn {\n\t\t    \t\tl: e.left,\n\t\t    \t\tr: e.right,\n\t\t    \t}\n\t\t    })\n\t\t});\n\t}\n\n\tremoveByIndex(index) {\n\t\tthis.words.splice(index, 1);\n\t}\n\n\tremoveAll(){\n\t\tthis.words = [];\n\t}\n\n\ttoString() {\n\t\treturn this.words.map((e) => {\n\t\t\treturn e.toString();\n\t\t}).toString();\n\t}\n\n\ttoCsv(){\n\t\treturn this.words.map((e, i) => {\n\t\t\tlet out = `\"<span>${e.left[0].replace(';', '%3B')}</span>\";\"<p><ruby>${e.left[0].replace(';', '%3B')}<rt>${e.left[1].replace(';', '%3B')}</rt></ruby></p>`;\n\t\t\tout += `<p>${e.right.map(rightEl => { return `<p>${rightEl.trim().replace(';', '%3B')}</p>`; })}</p>\"`;\n\t\t\treturn out;\n\t\t}).join(\"\\n\");\n\t}\n}\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/WordList.ts","import * as $ from 'jquery';\n\nimport { Definition } from \"./Definition\";\nimport { WordList } from \"./WordList\";\n\nlet list = new WordList();\nlist.load();\n\nvar clients:Array<any> = [];\n\nfunction broadcast(m) {\n\tconsole.log(\"Broadcasting\", m, `to ${clients.length} clients`, clients);\n\tclients.forEach(client => {\n\t\tconsole.log(client);\n\t\tclient.postMessage(m);\n\t});\n}\n\nfunction connected(p:browser.runtime.Port) {\n\tclients.push(p);\n\tp.name = `test${clients.length}`;\n\tp.onMessage.addListener(m => {\n\t\tswitch(m.type){\n\t\t\tcase \"add\": {\n\t\t\t  \tlet def = new Definition();\n\t\t\t  \tdef.left = m.l;\n\t\t\t  \tdef.right = m.r;\n\n\t\t\t  \tlist.addWord(def);\n\n\t\t\t  \tbroadcast({type: \"refresh\"});\n\t\t\t    console.log(\"Ordered refresh\");\n\t\t\t   \tbreak;\n\t\t\t}\n\t\t\tcase \"refresh\": {\n\t\t\t\tbroadcast({type: \"refresh\"});\n\t\t\t\tlist.load();\n\n\t\t\t    console.log(\"Ordered refresh\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n  \t});\n\n  \tp.onDisconnect.addListener( event =>{\n  \t\tclients.splice(clients.findIndex(e => {\n  \t\t\treturn e.name == p.name;\n  \t\t}), 1);\n  \t\tconsole.log(\"Removed client\");\n  \t})\n}\n\nbrowser.runtime.onConnect.addListener(connected);\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/background.ts"],"sourceRoot":""}